!function(global){var _u=void 0,_n=null,o={},ajax=function(){var ajax=function(){var e=!1,t=!1,o="Msxml2.XMLHTTP",u=[o+".6.0",o+".3.0","Microsoft.XMLHTTP"];try{new XDomainRequest,e=!0,t=!0}catch(r){try{new ActiveXObject(o),e=!0}catch(i){}}var c=function(){var o;if(e)for(var r=0;r<n.length;r++)try{new ActiveXObject(u[r]),o=function(){return new ActiveXObject(u[r])};break}catch(i){}return o==_u&&(o=function(){return new XMLHttpRequest}),t?function(n){if(1==n){var e=new XDomainRequest;return e.ie=0,e}return o()}:o}(),a=function(n,e){"POST"==n&&e.setRequestHeader("Content-type","application/x-www-form-urlencoded")},s=function(n,e){if(e)for(var t in e)n.setRequestHeader(t,e[t])};return function(n,e,t,o,u){n=(n+"").toUpperCase(),e+=(-1==e.indexOf("?")?"?":"&")+(new Date).getTime();var r="";if("string"!=typeof t)for(var i in t)r+="&"+i+"="+encodeURIComponent(t[i]);else r=t;if("GET"==n&&(e+=r,r=null),u==_u){var f=c();return f.open(n,e,!1),a(n,f),s(f,o),f.send(r),f.responseText}var f=c(/^https?:\/\//i.test(e)?1:0);0==f.ie?(f.onprogress=function(){},f.onload=function(){u(f.status,f.responseText)},f.open(n,e)):(f.onreadystatechange=function(){4==f.readyState&&u(f.status,f.responseText)},f.open(n,e,!0)),a(n,f),s(f,o),f.send(r)}}();return ajax.json=function(v){return eval("["+v+"]")[0]},ajax}();o.reception=function(n){if(n==_u||n==_n)return null;var e=ajax.json,t={},o="";return t.uuid=function(){return o},t.connect=function(t){return""!=o?void t(""):void ajax("GET",n+"/create","",null,function(n,u){u=e(u),o=u.uuid,t(o)})},t.close=function(t){return""==o?void t(!1):void ajax("GET",n+"/clear/"+o,"",null,function(n,u){u=e(u),o="",t(u.result)})},t.reconnect=function(n){n!=_u&&n!=_n||(n=""),o=n},t.size=function(t){return""==o?void t(-1):void ajax("GET",n+"/size/"+o,"",null,function(n,o){o=e(o),t(o.size)})},t.send=function(t,u){return""==o?void u(!1):void ajax("POST",n+"/send/"+o,t,null,function(n,t){t=e(t),u(t.result)})},t.connectSend=function(n,e,o){t.reconnect(n),t.send(e,o)},t},o.sse=function(n,e){if(n==_u||n==_n||e==_u||e==_n)return null;var t={},o=e,u=null;return t.connect=function(e){null!=u&&t.close(),u=new EventSource(n+"/"+document.domain+"/"+o+"/"+window.location.protocol,{withCredentials:!0}),u.onmessage=function(n){n.data!=_u&&n.data!=_n&&""!=n.data&&e(!0,n)},u.onerror=function(n){t.isConnect()||t.close(),e(!1,n)}},t.close=function(){if(null!=u){try{u.close()}catch(n){}u=null}},t.uuid=function(){return o},t.isConnect=function(){return null==u?!1:1==u.readyState},t},global.HttpPush=o}(window);